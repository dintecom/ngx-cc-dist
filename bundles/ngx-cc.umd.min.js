!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("credit-card-type"),require("@angular/cdk/a11y"),require("@angular/cdk/coercion"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/form-field"),require("rxjs"),require("card-validator"),require("@angular/common"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("ngx-cc",["exports","@angular/core","credit-card-type","@angular/cdk/a11y","@angular/cdk/coercion","@angular/forms","@angular/material/core","@angular/material/form-field","rxjs","card-validator","@angular/common","@angular/material/input"],e):e((t=t||self)["ngx-cc"]={},t.ng.core,t.creditCardType,t.ng.cdk.a11y,t.ng.cdk.coercion,t.ng.forms,t.ng.material.core,t.ng.material["form-field"],t.rxjs,t.validator,t.ng.common,t.ng.material.input)}(this,function(t,e,n,r,o,i,a,s,u,c,l,p){"use strict";function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}n=n&&n.hasOwnProperty("default")?n["default"]:n,c=c&&c.hasOwnProperty("default")?c["default"]:c;var h=function(){function t(){}return t.prototype.getCardType=function(t){return n(t)[0]},t.prototype.prettyCardNumber=function(t,e){var r=n.getTypeInfo(e);if(r){for(var o=[].concat(0,r.gaps,t.length),i=[],a=0;o[a]<t.length;a++){var s=o[a],u=Math.min(o[a+1],t.length);i.push(t.substring(s,u))}return i.join(" ")}return t},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),g=function(t){return c.number(t.value).isValid?null:{invalidCardNumber:!0}},f={"default":"https://img.icons8.com/color/40/000000/bank-card-back-side.png",visa:"https://img.icons8.com/color/40/000000/visa.png",mastercard:"https://img.icons8.com/color/40/000000/mastercard.png",discover:"https://img.icons8.com/color/40/000000/discover.png",jcb:"https://img.icons8.com/color/40/000000/jcb.png",maestro:"https://img.icons8.com/color/40/000000/maestro.png","american-express":"https://img.icons8.com/color/40/000000/amex.png","diners-club":"https://img.icons8.com/color/40/000000/diners-club.png"},y=g,m=function(){function t(e,n,r,o,i,a,s){var c=this;this.injector=e,this.elRef=n,this.fm=r,this.parentForm=o,this.parentFormGroup=i,this.defaultErrorStateMatcher=a,this.creditCardService=s,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.cardNumber="",this.cardIcon=f["default"],this.stateChanges=new u.Subject,this.id="ngx-cc"+t.nextId,this.describedBy="",(this.parentFormGroup||this.parentForm)&&(this._formSubmitSubscription=i.ngSubmit.subscribe(function(){c.ngControl.control.markAsTouched()})),r.monitor(n.nativeElement,!0).subscribe(function(t){c.focused=!!t,c.stateChanges.next()})}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.onChange(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this.cardNumber.replace(/\s/g,"")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(t){this._defaultStyles=o.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.writeValue=function(t){this.cardNumber=t||""},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDescribedByIds=function(t){this.describedBy=t.join(" ")},t.prototype.onContainerClick=function(t){"input"!==t.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},t.prototype.updateIcon=function(t){var e=t.target.value.replace(/\s/g,""),n="default";this.onChange(e),this.ngControl.control.markAsDirty(),this.card=this.creditCardService.getCardType(e),this.card&&(this.maxNumberLimit=Math.max.apply(Math,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}(this.card.lengths)),n=this.card.type),this.cardNumber=this.creditCardService.prettyCardNumber(e,n),this.cardIcon=e?f[n]:f["default"]},t.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},t.prototype.ngOnDestroy=function(){this._formSubmitSubscription&&this._formSubmitSubscription.unsubscribe(),this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},t.prototype.updateErrorState=function(){var t=this.errorState,e=this.parentFormGroup||this.parentForm,n=this.defaultErrorStateMatcher,r=this.ngControl?this.ngControl.control:null,o=n.isErrorState(r,e);o!==t&&(this.errorState=o,this.stateChanges.next())},t.nextId=0,t.decorators=[{type:e.Component,args:[{selector:"ngx-cc",template:'\n      <div class="ngx-cc-container" [ngClass]="styleClass">\n        <input *ngIf="!defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input"\n        type="text"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n\n        <input *ngIf="defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input-default"\n        type="text"\n        [placeholder]="placeholder"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        [ngStyle]="{\'background-image\': \'url(\' + cardIcon + \')\'}"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n        <img *ngIf="!defaultStyles" class="ngx-cc-suffix" [src]="cardIcon" />\n      </div>\n      ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return t}),multi:!0},{provide:i.NG_VALIDATORS,useValue:y,multi:!0},{provide:s.MatFormFieldControl,useExisting:e.forwardRef(function(){return t}),multi:!0}],encapsulation:e.ViewEncapsulation.None,styles:["\n    .ngx-cc-container {\n      display: flex;\n      position: relative;\n    }\n    .ngx-cc-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n    .ngx-cc-input-default {\n      background-position: 100%;\n      background-repeat: no-repeat;\n    }\n    .ngx-cc-form-field div.mat-form-field-wrapper div.mat-form-field-flex {\n      align-items: flex-end;\n    }\n    .ngx-cc-suffix {\n      position: absolute;\n      top: -1.5rem;\n      right: 0;\n    }\n    "]}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:e.ElementRef},{type:r.FocusMonitor},{type:i.NgForm,decorators:[{type:e.Optional}]},{type:i.FormGroupDirective,decorators:[{type:e.Optional}]},{type:a.ErrorStateMatcher},{type:h}]},t.propDecorators={styleClass:[{type:e.Input}],value:[{type:e.Input}],placeholder:[{type:e.Input}],empty:[{type:e.Input}],required:[{type:e.Input}],disabled:[{type:e.Input}],defaultStyles:[{type:e.Input}],id:[{type:e.HostBinding}],describedBy:[{type:e.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:e.HostBinding,args:["class.floating"]}]},t}(),b=function(t){var e=c.expirationDate(t.value);return e.month&&e.year?null:{invalidDate:!0}},C=b,v=function(){function t(e,n,r,o,i,a){var s=this;this.injector=e,this.elRef=n,this.fm=r,this.parentForm=o,this.parentFormGroup=i,this.defaultErrorStateMatcher=a,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new u.Subject,this.cardDate="",this.id="ngx-cc"+t.nextId,this.describedBy="",(this.parentFormGroup||this.parentForm)&&(this._formSubmitSubscription=i.ngSubmit.subscribe(function(){s.ngControl.control.markAsTouched()})),r.monitor(n.nativeElement,!0).subscribe(function(t){s.focused=!!t,s.stateChanges.next()})}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.onChanges(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this.cardDate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(t){this._defaultStyles=o.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.writeValue=function(t){this.cardDate=t||""},t.prototype.registerOnChange=function(t){this.onChanges=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDescribedByIds=function(t){this.describedBy=t.join(" ")},t.prototype.onContainerClick=function(t){"input"!==t.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},t.prototype.updateDate=function(){this.ngControl&&(this.onChanges(this.ngControl.control.value),this.ngControl.control.markAsDirty(),this.cardDate=this.ngControl.control.value)},t.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched(),this.cardDate=this.ngControl.control.value)},t.prototype.ngOnDestroy=function(){this._formSubmitSubscription&&this._formSubmitSubscription.unsubscribe(),this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},t.prototype.updateErrorState=function(){var t=this.errorState,e=this.parentFormGroup||this.parentForm,n=this.defaultErrorStateMatcher,r=this.ngControl?this.ngControl.control:null,o=n.isErrorState(r,e);o!==t&&(this.errorState=o,this.stateChanges.next())},t.nextId=0,t.decorators=[{type:e.Component,args:[{selector:"ngx-cc-date",template:'\n    <div class="ngx-cc-date-container" [ngClass]="styleClass">\n      <input\n      ngxNumberOnly\n      ngxFormatDate\n      maxlength="7"\n      [ngClass]="{\'ngx-cc-date-input\': !defaultStyles}"\n      type="text"\n      [placeholder]="placeholder || \'\'"\n      [required]="required"\n      [disabled]="disabled"\n      [value]="cardDate"\n      (blur)="updateOnTouch()"\n      (input)="updateDate()"\n      >\n    </div>\n  ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return t}),multi:!0},{provide:i.NG_VALIDATORS,useValue:C,multi:!0},{provide:s.MatFormFieldControl,useExisting:e.forwardRef(function(){return t}),multi:!0}],encapsulation:e.ViewEncapsulation.None,styles:["\n    .ngx-cc-date-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:e.ElementRef},{type:r.FocusMonitor},{type:i.NgForm,decorators:[{type:e.Optional}]},{type:i.FormGroupDirective,decorators:[{type:e.Optional}]},{type:a.ErrorStateMatcher}]},t.propDecorators={styleClass:[{type:e.Input}],value:[{type:e.Input}],placeholder:[{type:e.Input}],empty:[{type:e.Input}],required:[{type:e.Input}],disabled:[{type:e.Input}],defaultStyles:[{type:e.Input}],id:[{type:e.HostBinding}],describedBy:[{type:e.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:e.HostBinding,args:["class.floating"]}]},t}(),x=function(){function t(t){this.elRef=t}return Object.defineProperty(t.prototype,"ngxNumberOnly",{get:function(){return this._ngxNumberOnly},set:function(t){this._ngxNumberOnly=o.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),t.prototype.onKeyDown=function(t){if(this.ngxNumberOnly){if(-1!==[46,8,9,27,13,110,190].indexOf(t.keyCode)||65===t.keyCode&&(t.ctrlKey||t.metaKey)||67===t.keyCode&&(t.ctrlKey||t.metaKey)||86===t.keyCode&&(t.ctrlKey||t.metaKey)||88===t.keyCode&&(t.ctrlKey||t.metaKey)||t.keyCode>=35&&t.keyCode<=39)return;if((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault(),this.ngxMaxLength)return t.target.value.replace(/\s/g,"").length<this.ngxMaxLength}},t.decorators=[{type:e.Directive,args:[{selector:"[ngxNumberOnly]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef}]},t.propDecorators={ngxNumberOnly:[{type:e.Input}],ngxMaxLength:[{type:e.Input}],onKeyDown:[{type:e.HostListener,args:["keydown",["$event"]]}]},t}(),S=function(){function t(t){this.control=t,this.isUpdated=!1}return t.prototype.formatDate=function(t){var e=t.target.value,n=parseInt(e,10);if(!e)return this.isUpdated=!1,void this.control.control.setValue(e);!this.isUpdated&&n>=10&&n<=12?(this.control.control.setValue(n+" / "),this.isUpdated=!0):!this.isUpdated&&n>=2&&n<=9?(this.control.control.setValue("0"+n+" / "),this.isUpdated=!0):!this.isUpdated&&2===e.length&&n<12&&n>0?(this.control.control.setValue(e+" / "),this.isUpdated=!0):this.control.control.setValue(e)},t.decorators=[{type:e.Directive,args:[{selector:"[ngxFormatDate]"}]}],t.ctorParameters=function(){return[{type:i.NgControl}]},t.propDecorators={formatDate:[{type:e.HostListener,args:["input",["$event"]]}]},t}(),O=function(){function t(e,n,r,o,i,a){var s=this;this.injector=e,this.elRef=n,this.fm=r,this.parentForm=o,this.parentFormGroup=i,this.defaultErrorStateMatcher=a,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new u.Subject,this.cardCvv="",this.maxCvvLength=4,this.id="ngx-cc"+t.nextId,this.describedBy="",(this.parentFormGroup||this.parentForm)&&(this._formSubmitSubscription=i.ngSubmit.subscribe(function(){s.ngControl.control.markAsTouched()})),r.monitor(n.nativeElement,!0).subscribe(function(t){s.focused=!!t,s.stateChanges.next()})}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.onChanges(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this.cardCvv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(t){this._required=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=o.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(t){this._defaultStyles=o.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cvvSize",{get:function(){return this._cvvSize},set:function(t){this._cvvSize=t,this.ngControl&&this.ngControl.control.updateValueAndValidity()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.validate=function(t){return c.cvv(t.value,this.cvvSize).isValid?null:{invalidCvv:!0}},t.prototype.writeValue=function(t){this.cardCvv=t||""},t.prototype.registerOnChange=function(t){this.onChanges=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDescribedByIds=function(t){this.describedBy=t.join(" ")},t.prototype.onContainerClick=function(t){"input"!==t.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},t.prototype.updateCvv=function(t){var e=t.target.value;this.cardCvv=e,this.onChanges(e),this.ngControl.control.markAsDirty()},t.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},t.prototype.ngOnDestroy=function(){this._formSubmitSubscription&&this._formSubmitSubscription.unsubscribe(),this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},t.prototype.updateErrorState=function(){var t=this.errorState,e=this.parentFormGroup||this.parentForm,n=this.defaultErrorStateMatcher,r=this.ngControl?this.ngControl.control:null,o=n.isErrorState(r,e);o!==t&&(this.errorState=o,this.stateChanges.next())},t.nextId=0,t.decorators=[{type:e.Component,args:[{selector:"ngx-cc-cvv",template:'\n    <div class="ngx-cc-cvv-container" [ngClass]="styleClass">\n      <input\n        ngxNumberOnly\n        [ngxMaxLength]="maxCvvLength"\n        [ngClass]="{\'ngx-cc-cvv-input\': !defaultStyles}"\n        type="text"\n        [placeholder]="placeholder || \'\'"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardCvv"\n        (blur)="updateOnTouch()"\n        (input)="updateCvv($event)">\n    </div>\n  ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef(function(){return t}),multi:!0},{provide:i.NG_VALIDATORS,useExisting:e.forwardRef(function(){return t}),multi:!0},{provide:s.MatFormFieldControl,useExisting:e.forwardRef(function(){return t}),multi:!0}],styles:["\n    .ngx-cc-cvv-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:e.Injector},{type:e.ElementRef},{type:r.FocusMonitor},{type:i.NgForm,decorators:[{type:e.Optional}]},{type:i.FormGroupDirective,decorators:[{type:e.Optional}]},{type:a.ErrorStateMatcher}]},t.propDecorators={styleClass:[{type:e.Input}],value:[{type:e.Input}],placeholder:[{type:e.Input}],empty:[{type:e.Input}],required:[{type:e.Input}],disabled:[{type:e.Input}],defaultStyles:[{type:e.Input}],cvvSize:[{type:e.Input,args:["cvv-size"]}],id:[{type:e.HostBinding}],describedBy:[{type:e.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:e.HostBinding,args:["class.floating"]}]},t}(),_=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[m,x,v,S,O],imports:[l.CommonModule,i.FormsModule,p.MatInputModule,s.MatFormFieldModule],exports:[m,v,O,x,S]}]}],t}();t.CcDateComponent=v,t.NgxCcComponent=m,t.NgxCcModule=_,t.NgxCcService=h,t.ɵa=g,t.ɵb=b,t.ɵc=x,t.ɵd=S,t.ɵe=O,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-cc.umd.min.js.map