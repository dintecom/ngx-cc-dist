!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("credit-card-type"),require("@angular/cdk/a11y"),require("@angular/cdk/coercion"),require("@angular/forms"),require("@angular/material/core"),require("@angular/material/form-field"),require("rxjs"),require("card-validator"),require("@angular/common"),require("@angular/material/input")):"function"==typeof define&&define.amd?define("ngx-cc",["exports","@angular/core","credit-card-type","@angular/cdk/a11y","@angular/cdk/coercion","@angular/forms","@angular/material/core","@angular/material/form-field","rxjs","card-validator","@angular/common","@angular/material/input"],t):t((e=e||self)["ngx-cc"]={},e.ng.core,e.creditCardType,e.ng.cdk.a11y,e.ng.cdk.coercion,e.ng.forms,e.ng.material.core,e.ng.material["form-field"],e.rxjs,e.validator,e.ng.common,e.ng.material.input)}(this,function(e,t,n,r,o,i,a,s,u,l,c,d){"use strict";function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}n=n&&n.hasOwnProperty("default")?n["default"]:n,l=l&&l.hasOwnProperty("default")?l["default"]:l;var h=function(){function e(){}return e.prototype.getCardType=function(e){return n(e)[0]},e.prototype.prettyCardNumber=function(e,t){var r=n.getTypeInfo(t);if(r){for(var o=[].concat(0,r.gaps,e.length),i=[],a=0;o[a]<e.length;a++){var s=o[a],u=Math.min(o[a+1],e.length);i.push(e.substring(s,u))}return i.join(" ")}return e},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),g=function(e){return l.number(e.value).isValid?null:{invalidCardNumber:!0}},f={"default":"https://img.icons8.com/color/40/000000/bank-card-back-side.png",visa:"https://img.icons8.com/color/40/000000/visa.png",mastercard:"https://img.icons8.com/color/40/000000/mastercard.png",discover:"https://img.icons8.com/color/40/000000/discover.png",jcb:"https://img.icons8.com/color/40/000000/jcb.png",maestro:"https://img.icons8.com/color/40/000000/maestro.png","american-express":"https://img.icons8.com/color/40/000000/amex.png","diners-club":"https://img.icons8.com/color/40/000000/diners-club.png"},y=g,m=function(){function e(t,n,r,o,i,a,s){var l=this;this.injector=t,this.elRef=n,this.parentForm=r,this.parentFormGroup=o,this.defaultErrorStateMatcher=i,this.fm=a,this.creditCardService=s,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.cardNumber="",this.cardIcon=f["default"],this.stateChanges=new u.Subject,this.id="ngx-cc"+e.nextId,this.describedBy="",(this.parentFormGroup||this.parentForm)&&o.ngSubmit.subscribe(function(){l.ngControl.control.markAsTouched()}),a.monitor(n.nativeElement,!0).subscribe(function(e){l.focused=!!e,l.stateChanges.next()})}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChange(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.cardNumber.replace(/\s/g,"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=o.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},e.prototype.writeValue=function(e){this.cardNumber=e||""},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},e.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},e.prototype.updateIcon=function(e){var t=e.target.value.replace(/\s/g,""),n="default";this.onChange(t),this.ngControl.control.markAsDirty(),this.card=this.creditCardService.getCardType(t),this.card&&(this.maxNumberLimit=Math.max.apply(Math,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}(this.card.lengths)),n=this.card.type),this.cardNumber=this.creditCardService.prettyCardNumber(t,n),this.cardIcon=t?f[n]:f["default"]},e.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},e.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},e.prototype.updateErrorState=function(){var e=this.errorState,t=this.parentFormGroup||this.parentForm,n=this.defaultErrorStateMatcher,r=this.ngControl?this.ngControl.control:null,o=n.isErrorState(r,t);o!==e&&(this.errorState=o,this.stateChanges.next())},e.nextId=0,e.decorators=[{type:t.Component,args:[{selector:"ngx-cc",template:'\n      <div class="ngx-cc-container" [ngClass]="styleClass">\n        <input *ngIf="!defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input"\n        type="text"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n\n        <input *ngIf="defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input-default"\n        type="text"\n        [placeholder]="placeholder"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        [ngStyle]="{\'background-image\': \'url(\' + cardIcon + \')\'}"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n        <img *ngIf="!defaultStyles" class="ngx-cc-suffix" [src]="cardIcon" />\n      </div>\n      ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0},{provide:i.NG_VALIDATORS,useValue:y,multi:!0},{provide:s.MatFormFieldControl,useExisting:t.forwardRef(function(){return e}),multi:!0}],encapsulation:t.ViewEncapsulation.None,styles:["\n    .ngx-cc-container {\n      display: flex;\n      position: relative;\n    }\n    .ngx-cc-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n    .ngx-cc-input-default {\n      background-position: 100%;\n      background-repeat: no-repeat;\n    }\n    .ngx-cc-form-field div.mat-form-field-wrapper div.mat-form-field-flex {\n      align-items: flex-end;\n    }\n    .ngx-cc-suffix {\n      position: absolute;\n      top: -1.5rem;\n      right: 0;\n    }\n    "]}]}],e.ctorParameters=function(){return[{type:t.Injector},{type:t.ElementRef},{type:i.NgForm,decorators:[{type:t.Optional}]},{type:i.FormGroupDirective,decorators:[{type:t.Optional}]},{type:a.ErrorStateMatcher},{type:r.FocusMonitor},{type:h}]},e.propDecorators={styleClass:[{type:t.Input}],value:[{type:t.Input}],placeholder:[{type:t.Input}],empty:[{type:t.Input}],required:[{type:t.Input}],disabled:[{type:t.Input}],defaultStyles:[{type:t.Input}],id:[{type:t.HostBinding}],describedBy:[{type:t.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:t.HostBinding,args:["class.floating"]}]},e}(),b=function(e){var t=l.expirationDate(e.value);return t.month&&t.year?null:{invalidDate:!0}},C=b,v=function(){function e(t,n,r){var o=this;this.injector=t,this.elRef=n,this.fm=r,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new u.Subject,this.cardDate="",this.id="ngx-cc"+e.nextId,this.describedBy="",r.monitor(n.nativeElement,!0).subscribe(function(e){o.focused=!!e,o.stateChanges.next()})}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChanges(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.cardDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=o.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},e.prototype.ngDoCheck=function(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())},e.prototype.writeValue=function(e){this.cardDate=e||""},e.prototype.registerOnChange=function(e){this.onChanges=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},e.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},e.prototype.updateDate=function(){this.ngControl&&(this.onChanges(this.ngControl.control.value),this.ngControl.control.markAsDirty(),this.cardDate=this.ngControl.control.value)},e.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched(),this.cardDate=this.ngControl.control.value)},e.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},e.nextId=0,e.decorators=[{type:t.Component,args:[{selector:"ngx-cc-date",template:'\n    <div class="ngx-cc-date-container" [ngClass]="styleClass">\n      <input\n      ngxNumberOnly\n      ngxFormatDate\n      maxlength="7"\n      [ngClass]="{\'ngx-cc-date-input\': !defaultStyles}"\n      type="text"\n      [placeholder]="placeholder || \'\'"\n      [required]="required"\n      [disabled]="disabled"\n      [value]="cardDate"\n      (blur)="updateOnTouch()"\n      (input)="updateDate()"\n      >\n    </div>\n  ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0},{provide:i.NG_VALIDATORS,useValue:C,multi:!0},{provide:s.MatFormFieldControl,useExisting:t.forwardRef(function(){return e}),multi:!0}],encapsulation:t.ViewEncapsulation.None,styles:["\n    .ngx-cc-date-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:t.Injector},{type:t.ElementRef},{type:r.FocusMonitor}]},e.propDecorators={styleClass:[{type:t.Input}],value:[{type:t.Input}],placeholder:[{type:t.Input}],empty:[{type:t.Input}],required:[{type:t.Input}],disabled:[{type:t.Input}],defaultStyles:[{type:t.Input}],id:[{type:t.HostBinding}],describedBy:[{type:t.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:t.HostBinding,args:["class.floating"]}]},e}(),x=function(){function e(e){this.elRef=e}return Object.defineProperty(e.prototype,"ngxNumberOnly",{get:function(){return this._ngxNumberOnly},set:function(e){this._ngxNumberOnly=o.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){if(this.ngxNumberOnly){if(-1!==[46,8,9,27,13,110,190].indexOf(e.keyCode)||65===e.keyCode&&(e.ctrlKey||e.metaKey)||67===e.keyCode&&(e.ctrlKey||e.metaKey)||86===e.keyCode&&(e.ctrlKey||e.metaKey)||88===e.keyCode&&(e.ctrlKey||e.metaKey)||e.keyCode>=35&&e.keyCode<=39)return;if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault(),this.ngxMaxLength)return e.target.value.replace(/\s/g,"").length<this.ngxMaxLength}},e.decorators=[{type:t.Directive,args:[{selector:"[ngxNumberOnly]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e.propDecorators={ngxNumberOnly:[{type:t.Input}],ngxMaxLength:[{type:t.Input}],onKeyDown:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}(),O=function(){function e(e){this.control=e,this.isUpdated=!1}return e.prototype.formatDate=function(e){var t=e.target.value,n=parseInt(t,10);if(!t)return this.isUpdated=!1,void this.control.control.setValue(t);!this.isUpdated&&n>=10&&n<=12?(this.control.control.setValue(n+" / "),this.isUpdated=!0):!this.isUpdated&&n>=2&&n<=9?(this.control.control.setValue("0"+n+" / "),this.isUpdated=!0):!this.isUpdated&&2===t.length&&n<12&&n>0?(this.control.control.setValue(t+" / "),this.isUpdated=!0):this.control.control.setValue(t)},e.decorators=[{type:t.Directive,args:[{selector:"[ngxFormatDate]"}]}],e.ctorParameters=function(){return[{type:i.NgControl}]},e.propDecorators={formatDate:[{type:t.HostListener,args:["input",["$event"]]}]},e}(),S=function(){function e(t,n,r){var o=this;this.injector=t,this.elRef=n,this.fm=r,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new u.Subject,this.cardCvv="",this.maxCvvLength=4,this.id="ngx-cc"+e.nextId,this.describedBy="",r.monitor(n.nativeElement,!0).subscribe(function(e){o.focused=!!e,o.stateChanges.next()})}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChanges(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.cardCvv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=o.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=o.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cvvSize",{get:function(){return this._cvvSize},set:function(e){this._cvvSize=e,this.ngControl&&this.ngControl.control.updateValueAndValidity()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.ngControl=this.injector.get(i.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},e.prototype.ngDoCheck=function(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())},e.prototype.validate=function(e){return l.cvv(e.value,this.cvvSize).isValid?null:{invalidCvv:!0}},e.prototype.writeValue=function(e){this.cardCvv=e||""},e.prototype.registerOnChange=function(e){this.onChanges=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},e.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},e.prototype.updateCvv=function(e){var t=e.target.value;this.cardCvv=t,this.onChanges(t),this.ngControl.control.markAsDirty()},e.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},e.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},e.nextId=0,e.decorators=[{type:t.Component,args:[{selector:"ngx-cc-cvv",template:'\n    <div class="ngx-cc-cvv-container" [ngClass]="styleClass">\n      <input\n        ngxNumberOnly\n        [ngxMaxLength]="maxCvvLength"\n        [ngClass]="{\'ngx-cc-cvv-input\': !defaultStyles}"\n        type="text"\n        [placeholder]="placeholder || \'\'"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardCvv"\n        (blur)="updateOnTouch()"\n        (input)="updateCvv($event)">\n    </div>\n  ',providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef(function(){return e}),multi:!0},{provide:i.NG_VALIDATORS,useExisting:t.forwardRef(function(){return e}),multi:!0},{provide:s.MatFormFieldControl,useExisting:t.forwardRef(function(){return e}),multi:!0}],styles:["\n    .ngx-cc-cvv-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:t.Injector},{type:t.ElementRef},{type:r.FocusMonitor}]},e.propDecorators={styleClass:[{type:t.Input}],value:[{type:t.Input}],placeholder:[{type:t.Input}],empty:[{type:t.Input}],required:[{type:t.Input}],disabled:[{type:t.Input}],defaultStyles:[{type:t.Input}],cvvSize:[{type:t.Input,args:["cvv-size"]}],id:[{type:t.HostBinding}],describedBy:[{type:t.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:t.HostBinding,args:["class.floating"]}]},e}(),I=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[m,x,v,O,S],imports:[c.CommonModule,i.FormsModule,d.MatInputModule,s.MatFormFieldModule],exports:[m,v,S,x,O]}]}],e}();e.CcDateComponent=v,e.NgxCcComponent=m,e.NgxCcModule=I,e.NgxCcService=h,e.ɵa=g,e.ɵb=b,e.ɵc=x,e.ɵd=O,e.ɵe=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-cc.umd.min.js.map