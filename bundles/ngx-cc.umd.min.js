!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("credit-card-type"),require("@angular/common"),require("@angular/material/input"),require("@angular/core"),require("@angular/forms"),require("@angular/cdk/a11y"),require("@angular/cdk/coercion"),require("@angular/material/form-field"),require("rxjs"),require("card-validator")):"function"==typeof define&&define.amd?define("ngx-cc",["exports","credit-card-type","@angular/common","@angular/material/input","@angular/core","@angular/forms","@angular/cdk/a11y","@angular/cdk/coercion","@angular/material/form-field","rxjs","card-validator"],t):t(e["ngx-cc"]={},e.creditCardType,e.ng.common,e.ng.material.input,e.ng.core,e.ng.forms,e.ng.cdk.a11y,e.ng.cdk.coercion,e.ng.material["form-field"],e.rxjs,e.validator)}(this,function(e,l,t,n,r,a,s,u,c,d,o){"use strict";l=l&&l.hasOwnProperty("default")?l["default"]:l,o=o&&o.hasOwnProperty("default")?o["default"]:o;var p=function(){function e(){}return e.prototype.getCardType=function(e){return l(e)[0]},e.prototype.prettyCardNumber=function(e,t){var n=l.getTypeInfo(t);if(n){for(var r=[].concat(0,n.gaps,e.length),o=[],i=0;r[i]<e.length;i++){var a=r[i],s=Math.min(r[i+1],e.length);o.push(e.substring(a,s))}return o.join(" ")}return e},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}var i=function(e){return o.number(e.value).isValid?null:{invalidCardNumber:!0}},g={"default":"https://img.icons8.com/color/40/000000/bank-card-back-side.png",visa:"https://img.icons8.com/color/40/000000/visa.png",mastercard:"https://img.icons8.com/color/40/000000/mastercard.png",discover:"https://img.icons8.com/color/40/000000/discover.png",jcb:"https://img.icons8.com/color/40/000000/jcb.png",maestro:"https://img.icons8.com/color/40/000000/maestro.png","american-express":"https://img.icons8.com/color/40/000000/amex.png","diners-club":"https://img.icons8.com/color/40/000000/diners-club.png"},f=i,y=function(){function i(e,t,n,r){var o=this;this.injector=e,this.elRef=t,this.fm=n,this.creditCardService=r,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.cardNumber="",this.cardIcon=g["default"],this.stateChanges=new d.Subject,this.id="ngx-cc"+i.nextId,this.describedBy="",n.monitor(t.nativeElement,!0).subscribe(function(e){o.focused=!!e,o.stateChanges.next()})}return Object.defineProperty(i.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChange(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"empty",{get:function(){return!this.cardNumber.replace(/\s/g,"")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(e){this._required=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=u.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.ngControl=this.injector.get(a.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},i.prototype.ngDoCheck=function(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())},i.prototype.writeValue=function(e){this.cardNumber=e||""},i.prototype.registerOnChange=function(e){this.onChange=e},i.prototype.registerOnTouched=function(e){this.onTouched=e},i.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},i.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},i.prototype.updateIcon=function(e){var t=e.target.value.replace(/\s/g,""),n="default";this.onChange(t),this.ngControl.control.markAsDirty(),this.card=this.creditCardService.getCardType(t),this.card&&(this.maxNumberLimit=Math.max.apply(Math,function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}(this.card.lengths)),n=this.card.type),this.cardNumber=this.creditCardService.prettyCardNumber(t,n),this.cardIcon=t?g[n]:g["default"]},i.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},i.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},i.nextId=0,i.decorators=[{type:r.Component,args:[{selector:"ngx-cc",template:'\n      <div class="ngx-cc-container" [ngClass]="styleClass">\n        <input *ngIf="!defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input"\n        type="text"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n\n        <input *ngIf="defaultStyles"\n        ngxNumberOnly\n        [ngxMaxLength]="maxNumberLimit"\n        class="ngx-cc-input-default"\n        type="text"\n        [placeholder]="placeholder"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardNumber"\n        [ngStyle]="{\'background-image\': \'url(\' + cardIcon + \')\'}"\n        (blur)="updateOnTouch()"\n        (input)="updateIcon($event)" />\n        <img *ngIf="!defaultStyles" class="ngx-cc-suffix" [src]="cardIcon" />\n      </div>\n      ',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return i}),multi:!0},{provide:a.NG_VALIDATORS,useValue:f,multi:!0},{provide:c.MatFormFieldControl,useExisting:r.forwardRef(function(){return i}),multi:!0}],encapsulation:r.ViewEncapsulation.None,styles:["\n    .ngx-cc-container {\n      display: flex;\n      position: relative;\n    }\n    .ngx-cc-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n    .ngx-cc-input-default {\n      background-position: 100%;\n      background-repeat: no-repeat;\n    }\n    .ngx-cc-form-field div.mat-form-field-wrapper div.mat-form-field-flex {\n      align-items: flex-end;\n    }\n    .ngx-cc-suffix {\n      position: absolute;\n      top: -1.5rem;\n      right: 0;\n    }\n    "]}]}],i.ctorParameters=function(){return[{type:r.Injector},{type:r.ElementRef},{type:s.FocusMonitor},{type:p}]},i.propDecorators={styleClass:[{type:r.Input}],value:[{type:r.Input}],placeholder:[{type:r.Input}],empty:[{type:r.Input}],required:[{type:r.Input}],disabled:[{type:r.Input}],defaultStyles:[{type:r.Input}],id:[{type:r.HostBinding}],describedBy:[{type:r.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:r.HostBinding,args:["class.floating"]}]},i}(),m=function(e){var t=o.expirationDate(e.value);return t.month&&t.year?null:{invalidDate:!0}},b=m,C=function(){function o(e,t,n){var r=this;this.injector=e,this.elRef=t,this.fm=n,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new d.Subject,this.cardDate="",this.id="ngx-cc"+o.nextId,this.describedBy="",n.monitor(t.nativeElement,!0).subscribe(function(e){r.focused=!!e,r.stateChanges.next()})}return Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChanges(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return!this.cardDate},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"required",{get:function(){return this._required},set:function(e){this._required=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=u.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.ngControl=this.injector.get(a.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},o.prototype.ngDoCheck=function(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())},o.prototype.writeValue=function(e){this.cardDate=e||""},o.prototype.registerOnChange=function(e){this.onChanges=e},o.prototype.registerOnTouched=function(e){this.onTouched=e},o.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},o.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},o.prototype.updateDate=function(){this.ngControl&&(this.onChanges(this.ngControl.control.value),this.ngControl.control.markAsDirty(),this.cardDate=this.ngControl.control.value)},o.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched(),this.cardDate=this.ngControl.control.value)},o.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},o.nextId=0,o.decorators=[{type:r.Component,args:[{selector:"ngx-cc-date",template:'\n    <div class="ngx-cc-date-container" [ngClass]="styleClass">\n      <input\n      ngxNumberOnly\n      ngxFormatDate\n      maxlength="7"\n      [ngClass]="{\'ngx-cc-date-input\': !defaultStyles}"\n      type="text"\n      [placeholder]="placeholder || \'\'"\n      [required]="required"\n      [disabled]="disabled"\n      [value]="cardDate"\n      (blur)="updateOnTouch()"\n      (input)="updateDate()"\n      >\n    </div>\n  ',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return o}),multi:!0},{provide:a.NG_VALIDATORS,useValue:b,multi:!0},{provide:c.MatFormFieldControl,useExisting:r.forwardRef(function(){return o}),multi:!0}],encapsulation:r.ViewEncapsulation.None,styles:["\n    .ngx-cc-date-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],o.ctorParameters=function(){return[{type:r.Injector},{type:r.ElementRef},{type:s.FocusMonitor}]},o.propDecorators={styleClass:[{type:r.Input}],value:[{type:r.Input}],placeholder:[{type:r.Input}],empty:[{type:r.Input}],required:[{type:r.Input}],disabled:[{type:r.Input}],defaultStyles:[{type:r.Input}],id:[{type:r.HostBinding}],describedBy:[{type:r.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:r.HostBinding,args:["class.floating"]}]},o}(),v=function(){function e(e){this.elRef=e}return Object.defineProperty(e.prototype,"ngxNumberOnly",{get:function(){return this._ngxNumberOnly},set:function(e){this._ngxNumberOnly=u.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),e.prototype.onKeyDown=function(e){if(this.ngxNumberOnly){if(-1!==[46,8,9,27,13,110,190].indexOf(e.keyCode)||65===e.keyCode&&(e.ctrlKey||e.metaKey)||67===e.keyCode&&(e.ctrlKey||e.metaKey)||86===e.keyCode&&(e.ctrlKey||e.metaKey)||88===e.keyCode&&(e.ctrlKey||e.metaKey)||35<=e.keyCode&&e.keyCode<=39)return;if((e.shiftKey||e.keyCode<48||57<e.keyCode)&&(e.keyCode<96||105<e.keyCode)&&e.preventDefault(),this.ngxMaxLength)return e.target.value.replace(/\s/g,"").length<this.ngxMaxLength}},e.decorators=[{type:r.Directive,args:[{selector:"[ngxNumberOnly]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef}]},e.propDecorators={ngxNumberOnly:[{type:r.Input}],ngxMaxLength:[{type:r.Input}],onKeyDown:[{type:r.HostListener,args:["keydown",["$event"]]}]},e}(),x=function(){function e(e){this.control=e,this.isUpdated=!1}return e.prototype.formatDate=function(e){var t=e.target.value,n=parseInt(t,10);if(!t)return this.isUpdated=!1,void this.control.control.setValue(t);!this.isUpdated&&10<=n&&n<=12?(this.control.control.setValue(n+" / "),this.isUpdated=!0):!this.isUpdated&&2<=n&&n<=9?(this.control.control.setValue("0"+n+" / "),this.isUpdated=!0):!this.isUpdated&&2===t.length&&n<12&&0<n?(this.control.control.setValue(t+" / "),this.isUpdated=!0):this.control.control.setValue(t)},e.decorators=[{type:r.Directive,args:[{selector:"[ngxFormatDate]"}]}],e.ctorParameters=function(){return[{type:a.NgControl}]},e.propDecorators={formatDate:[{type:r.HostListener,args:["input",["$event"]]}]},e}(),O=function(e){return o.cvv(e.value).isValid?null:{invalidCvv:!0}},I=O,_=function(){function o(e,t,n){var r=this;this.injector=e,this.elRef=t,this.fm=n,this._disabled=!1,this._defaultStyles=!1,this._required=!1,this.ngControl=null,this.focused=!1,this.errorState=!1,this.stateChanges=new d.Subject,this.cardCvv="",this.maxCvvLength=4,this.id="ngx-cc"+o.nextId,this.describedBy="",n.monitor(t.nativeElement,!0).subscribe(function(e){r.focused=!!e,r.stateChanges.next()})}return Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.onChanges(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"empty",{get:function(){return!this.cardCvv},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"required",{get:function(){return this._required},set:function(e){this._required=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=u.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultStyles",{get:function(){return this._defaultStyles},set:function(e){this._defaultStyles=u.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shouldLabelFloat",{get:function(){return this.focused||!this.empty},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.ngControl=this.injector.get(a.NgControl),null!==this.ngControl&&(this.ngControl.valueAccessor=this)},o.prototype.ngDoCheck=function(){this.ngControl&&(this.errorState=this.ngControl.invalid&&this.ngControl.touched,this.stateChanges.next())},o.prototype.writeValue=function(e){this.cardCvv=e||""},o.prototype.registerOnChange=function(e){this.onChanges=e},o.prototype.registerOnTouched=function(e){this.onTouched=e},o.prototype.setDescribedByIds=function(e){this.describedBy=e.join(" ")},o.prototype.onContainerClick=function(e){"input"!==e.target.tagName.toLowerCase()&&this.elRef.nativeElement.querySelector("input").focus()},o.prototype.updateCvv=function(e){var t=e.target.value;this.cardCvv=t,this.onChanges(t),this.ngControl.control.markAsDirty()},o.prototype.updateOnTouch=function(){this.ngControl&&(this.onTouched(this.ngControl.control.value),this.ngControl.control.markAsTouched())},o.prototype.ngOnDestroy=function(){this.fm.stopMonitoring(this.elRef.nativeElement),this.stateChanges.complete()},o.nextId=0,o.decorators=[{type:r.Component,args:[{selector:"ngx-cc-cvv",template:'\n    <div class="ngx-cc-cvv-container" [ngClass]="styleClass">\n      <input\n        ngxNumberOnly\n        [ngxMaxLength]="maxCvvLength"\n        [ngClass]="{\'ngx-cc-cvv-input\': !defaultStyles}"\n        type="text"\n        [placeholder]="placeholder || \'\'"\n        [required]="required"\n        [disabled]="disabled"\n        [value]="cardCvv"\n        (blur)="updateOnTouch()"\n        (input)="updateCvv($event)">\n    </div>\n  ',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return o}),multi:!0},{provide:a.NG_VALIDATORS,useValue:I,multi:!0},{provide:c.MatFormFieldControl,useExisting:r.forwardRef(function(){return o}),multi:!0}],styles:["\n    .ngx-cc-cvv-input {\n      border: none;\n      background: none;\n      padding: 0;\n      outline: none;\n      font: inherit;\n      text-align: left;\n    }\n  "]}]}],o.ctorParameters=function(){return[{type:r.Injector},{type:r.ElementRef},{type:s.FocusMonitor}]},o.propDecorators={styleClass:[{type:r.Input}],value:[{type:r.Input}],placeholder:[{type:r.Input}],empty:[{type:r.Input}],required:[{type:r.Input}],disabled:[{type:r.Input}],defaultStyles:[{type:r.Input}],id:[{type:r.HostBinding}],describedBy:[{type:r.HostBinding,args:["attr.aria-describedby"]}],shouldLabelFloat:[{type:r.HostBinding,args:["class.floating"]}]},o}(),j=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{declarations:[y,v,C,x,_],imports:[t.CommonModule,a.FormsModule,n.MatInputModule,c.MatFormFieldModule],exports:[y,C,_,v,x]}]}],e}();e.NgxCcService=p,e.NgxCcComponent=y,e.CcDateComponent=C,e.NgxCcModule=j,e.ɵe=_,e.ɵd=x,e.ɵc=v,e.ɵf=O,e.ɵb=m,e.ɵa=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-cc.umd.min.js.map